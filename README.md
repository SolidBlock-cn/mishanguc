欢迎使用迷上城建（Mishang Urban Construction）模组。本模组为您提供了一系列方块和工具，打造出精美的城市。目前本模组还在开发中，各功能还不稳定，未来还会加入更加内容。

模组还不稳定，请勿将本模组内容用于实际开发中，以免因模组出现不兼容的更新而导致旧的内容消失。

**自 0.2.0 开始，本模组依赖 BRRP，安装本模组时请确保已安装 [BRRP 模组](https://github.com/SolidBlock-cn/BRRP)，并不再需要安装 ARRP 模组！**

**本模组是按照 LGPLv3 协议发布的，传播本模组时须遵守本协议。**

欢迎加入QQ群 **587928350** 或开黑啦频道邀请码 **KlFS0n** 体验本模组的最新更新。

For English version of the description, see [this file](README-en.md).

[点击此处查看更新记录。](UpdateLog.md)

## 如何安装

本模组使用 Fabric Loader，并依赖 Fabric API 和 BRRP（更好的运行时资源包）模组。请在安装本模组时，确保安装了 Fabric API 和 BRRP，否则可能造成游戏无法启动或者内容缺失。

（注意：在 0.2.0 版本之前，本模组依赖 ARRP，而不依赖 BRRP。BRRP 包含了 ARRP 的所有功能。）

只有 Fabric 版本，没有 Forge 版本。

## 模组内容

本模组加入了一系列方块和物品。

### 方块

#### 道路方块

本模组添加了一系列道路方块，用来构建你的城市中的道路。目前道路均为柏油路，支持白色与黄色标线，以及部分情况下的组合标线。

与某些模组不同，本模组中，道路和标线均位于同一方块。道路方块分为完整方块和台阶。

大多数带有朝向的道路方块在潜行时放置可以调整方向。例如，直线标线的道路方块放置时，标线是沿着视线前后方的方向的，如果潜行时放置，则标线在视线中呈现为水平方向。

本模组还添加了可自动标线的道路（包括台阶），放下后若侧面有方块更新，则会根据周围道路的标线来自动确定自身的标线种类、方向和颜色（点击方块顶部也可以手动触发更新）。注意不是所有的种类、方向和颜色的道路标线都会支持，因此很多情况下转换后的方块并不能与附近道路方块的标线匹配。自动标线道路会被直接转换为其他道路方块，因此如果方块旁边再有更新，该方块的标线也不会再次自动改变。

（自 0.2.0）玩家踩在道路方块上时，速度会提升至原先的 1.75 倍。该效果可以与“速度”效果或其他属性修饰器叠加。准确地说，只要是踩在带有 `mishanguc:roads` 方块标签的道路上时，都会有这样的效果。

（自 0.2.0）道路方块上方不能放置雪。

道路方块暂时不可合成。

#### 灯方块

本模组添加了一系列灯方块，包括完整灯块和装饰物方块。这些方块（除完整的灯块外）可含水。所有方块均不需要红石触发即可发光。

灯方块分为白色、黄色、青色三种，其中白色灯的亮度最高。完整灯方块是通过荧石粉、对应颜色的染料和对应颜色的混凝土合成的。完整灯方块可以在切石机中合成各种形状的灯装饰物。

条形灯和条形灯管方块可放置在墙上、地上或天花板上。放置在墙上时默认是水平的，潜行时放置可放置垂直方向的方块。

角落灯管是天花板上或地上的条形灯管和墙上的条形灯管的组合，可由两个对应的条形灯管合成。

灯与灯管的区别就是：灯管方块全部都是发光的，而灯方块则会有灰色混凝土的背景。灯管和灰色混凝土可以合成灯，例如白色的粗条形灯管和灰色混凝土可合成白色的粗条形灯管。

此外还有自动连接的灯装饰物方块。该方块吸附在方块面上并且可以在各个方向与附近的灯方块（如条形灯管、角落灯管和其他的自动连接灯管）连接。

#### 告示牌方块

本模组添加了各种纹理的告示牌方块，包括悬挂着的告示牌和墙上的告示牌。其中，悬挂告示牌方向的两侧都可以写文字，且当告示牌上方连接有方块或告示牌杆方块时，会显示告示牌杆。悬挂的告示牌的文字与方向对应，暂不支持直接旋转，如放置带有 NBT 的方块，应确保放置的方向与获取时的方向一致，以免文字不显示。

本模组有个隐形告示牌方块和（自 0.1.6）隐形的发光告示牌，自身不可见，但告示牌上的文字可见。

所有告示牌均可放在水中。此外，墙上的告示牌可以放在地上和天花板上，这与原版不同。

点击告示牌即可编辑文本。支持多行文本。你可以为每行文本设置以下属性：

- 加粗、倾斜、下划线、删除线、随机文本等。
- 文本大小。默认值取决于方块。悬挂告示牌上的文字默认大小为 5，墙上告示牌上的文字默认大小为 6，完整告示牌（含*两种*隐形告示牌）上的文字默认大小为 8。
- 文字在 X、Y、Z 三个坐标轴方向上的偏移。注意谨慎调整 Z 轴偏移，该偏移将使文本脱离告示牌平面，可能显示在告示牌后面（导致不可见），也有可能显示在告示牌前面（文本悬空）。
- X、Y 两个方向上的缩放。其效果与文本大小互相叠加。注意：如果将缩放调为 0，会导致文本不显示。没有 Z 轴方向上的缩放，因为文本本就在一个平面上，在 Z 轴方向缩放没有意义。
- 围绕 X、Y、Z 三个坐标轴的旋转。
- 文本颜色。可通过按钮调节文本颜色（仅限内置的 16 种颜色），也可以在旁边的文本框输入自定义颜色（数值、“#aaRRGGBB”格式的十六进制或者游戏内置的颜色名称）。如果文本框中输入的颜色不是 16 种内置颜色，则按钮会被禁用，文字显示为该文本框中定义的颜色。
- （自 0.1.6，且限 Minecraft 1.17 以上的版本）文本描边颜色。可通过按钮设置为：不显示边框、根据文本颜色自动决定描边颜色（和原版的发光告示牌一样）、选择内置颜色、选择内置颜色对应的发光告示牌描边颜色。暂不支持自定义。
- 阴影。不建议开启，当不同方向的文本都开启了“阴影”功能时，文本的显示次序可能存在异常。
- 绝对模式。若某一行开启绝对模式，则在“重新排列”文本时，这一行会被忽略。
- 水平对齐和垂直对齐。注意：如果你有连起来放置的多个告示牌，你应该会注意到对齐的是以单个告示牌为基准，而非多个。

添加多行文本时，文本不会自动排版，你可能会发现多层文本叠在一起。你可以通过点击“全部重排”来从上到下依次排列非绝对模式的文本行，该功能会根据文本大小依次排列各行，不同垂直对齐方向的文本互不干扰。每行文本都会在其上下方留下 1/8 行大小的行距。当然你也可以手动调节 Y 轴偏移来进行排版。

（自 0.1.6）如果你的告示牌还没有创建文本，你可以选择应用双行文字模板（一行大的一行小的，通常用在地铁站中，一行中文加一行英文）。对于悬挂告示牌，如果背面有文字，可以从背面复制。从背面复制文本时，所有的 X 轴偏移和水平对齐方式都会反向，文中的箭头文字（如“`→`”）也会反向。这在制作两面都有文字的导向牌时非常方便。（自 0.1.7）你也可以在选中单行文本时，点击“翻转”按钮，这一行的文本将会反向，或者按住 Ctrl 点击“翻转”按钮以将所有行的文本反向。

（自 0.1.7）编辑文本时，如果需要自定义 JSON 文本内容，可以在文本框中输入 `-json 一段JSON`，例如 `-json {text:一段文本,color:red,bold:true}`。本模组识别的 JSON 为宽容（lenient）模式，因此键和值均可以省略引号。

（自 0.2.0）你可以在文本框中输入 `-rect 宽 高` 以产生一个指定大小的长方形。该长方形的大小亦会受到文本大小和 X、Y 两个方向的缩放属性的影响。

（自 0.2.0）你可以在文本框中输入 `-pattern 图案名称` 以产生一个本模组内置的图案。本模组只内置了几个箭头图案。虽然箭头可以使用文字实现，但是存在一些问题：如果玩家没有开启强制 Unicode 字体功能，那么上下左右的箭头字符（`↑↓←→`）会显示得比角落方向的箭头字符（`↖↙↗↘`）大，而且即使本应对称的箭头其实并不完整对称，例如，本应左右对称的两个箭头字符可能并没有显示在同一个水平线上。鉴于这些问题，我推荐直接使用 `-pattern 图案名称` 的方式来显示箭头。可用的图案名称有：`al`、`ar`、`at`、`ab`、`alt`、`art`、`alb`、`arb`、`circle`、`ban`。

在告示牌编辑界面，各个按钮都进行了增强：点击按钮可调整数值，鼠标右键点击按钮或者按住 Shift 点击按钮可反方向调整，鼠标滚轮点击按钮或者按住 Alt+Shift 点击按钮可恢复默认值。滚动鼠标滚轮亦可用于调节数值。此外，按住 Ctrl 可 8 倍速调整，按住 Alt 可 1/8 倍速调整。

#### 栏杆

自模组版本 0.1.7 开始，模组新增了栏杆方块。栏杆方块可含水。

栏杆目前有 5 种形式：

- 普通。栏杆位于整个方块的靠近边缘的位置。放置时，其水平走向与水平视线方向垂直，也就是说，你放置栏杆方块时，栏杆是“横着”的。具体位于方块的哪一个边缘，取决于你准星对准的位置。
- 中间。栏杆位于方块正中央的位置。这种情况下，方块具有自动连接功能，类似于栅栏或者玻璃板。不过，与栅栏或者玻璃板不同，无论周围方块如何，栏杆总是至少连接了两个方向。如果放置时周围没有方块，则栏杆放置后，显示为水平视线方向的垂直的水平方向。如果周围方块有更改，该栏杆方块也将相应更改。
- 角落。两个相互垂直的普通栏杆方块叠加起来形成的。在一个普通栏杆方块相同的方块空间内放置一个与其方向垂直的方块，将会自动产生角落的栏杆方块。同样地，破坏该方块的一部分后，会留下另一部分的栏杆方块。
- 角落外部。类似于角落，不过是用于栏杆方块之外位置的直角的。这种情况下，旁边两个方块必须先放置，然后再在角落的适当位置放置栏杆方块，方块会自动转为角落外部的形状。注意这种情况下，方块放置后，其形状不会自动改变。
- 楼梯。放置在楼梯边缘或者楼梯上方（倒立的楼梯除外），方块会自动与楼梯的形状相匹配。

### 物品

本模组添加了一系列用来辅助建造的工具。

#### 道路连接状态调试工具

点击道路方块即可查看该道路在各方向上的连接方向、颜色、标线类型等数据。道路连接状态主要用于自动连接的道路方块识别。自动连接的道路方块会使用这些数据，因此如果自动连接的道路方块在转换时出现问题，可以使用调试工具检查附近道路方块的连接状态是否与看上去的一致。

#### ID检查工具

点击方块或实体可以用来查看方块或实体的 ID（包括原始 ID、文字 ID）和名称。持有此物品时不会与方块或实体交互，也不会破坏方块或攻击实体。按住 Shift 可用于获取流体的 ID。如果对着空气点击（即没有对准附近的方块或实体）则可以用于获取生物群系的 ID 和名称。

#### 快速建造工具

可以用来快速地放置或者移除多个方块。按下“破坏”键（默认为鼠标左键）时，平面上的一定范围内符合该匹配规则的方块都会被破坏。按下“使用”键（默认为鼠标右键）时，平面上的一定范围内符合该匹配规则的方块都会被复制（如果玩家副手上拿着方块，则放置该副手上的方块，而不是复制该平面上的方块）。持有此物品时，会显示将要被破坏和放置的方块的轮廓，用作一个简单的“预览”。

匹配规则有以下四种：

- 相同方块状态：即方块必须完全相同，包括其所有属性。比如，朝东的橡木楼梯只能和朝东的橡木楼梯匹配，不能和朝南的橡木楼梯匹配。该匹配规则只检查方块状态，不会检查方块实体。
- 相同方块：即方块相同但其属性可以不同。例如，朝东的橡木楼梯可以和朝南的橡木楼梯匹配，但不能和白桦木楼梯匹配。
- 相同材料：即只要方块的材料相同，就可以匹配。例如，橡木木板、橡木楼梯、白桦木楼梯、云杉木栅栏等方块都可以匹配，因为这些方块都是相同材料的。注意：草方块和泥土是不同材料的，尽管这两者看上去似乎都是泥土。
- 任何：即任何两个方块都可以匹配。

方块放置时会正常触发方块更新，也会检查方块是否可放置，但是并不会检查被放置的方块是否被实体阻挡。也就是说，即使被放置方块的地方有实体，你也可以使用此工具放置方块，将实体卡在方块里面。

（自 0.1.6）按住 Shift 时可放置或破坏流体。按住 Shift 或者 Alt 并滚动鼠标滚轮可调整匹配模式。

此工具仅限创造模式玩家使用。

#### 旋转工具

点击方块即可旋转。按住 Shift 可反方向旋转。即使是生存模式也可使用。

（自 0.2.0）此工具具有耐久度。非创造模式下，每旋转一次方块，就会损耗一个耐久度。但是，如果旋转后的方块与之前的方块完全相同，则不会损耗耐久度。

（自 0.2.0）旋转工具可以使用粉红色染料、下界合金锭和木棍合成。

注意：自 1.17 开始，方块实体不再能够被旋转，而悬挂的告示牌方块的文字在其 NBT 数据中是对应方向的，因此在 1.17 以上的版本，旋转悬挂告示牌方块时，其文字会消失，如再次旋转，文字则会显示在原先的位置，而不是旋转 180°。这个问题暂时还无法修复，但可以使用文本复制工具来手动处理。在 1.16.5，由于方块实体可以旋转，因此悬挂告示牌方块上的文字可以正常跟着被旋转。

#### 镜像工具

点击方块时可沿着被点击的方向镜像（翻转）方块。例如，朝东的楼梯方块，点击该方块的东侧或者西侧可变成朝西的，点击南侧或者北侧不受影响（因为该方块本来就南北对称）。即使是生存模式也可使用。（自 0.2.0）如点击方块顶部或底部，则通过玩家的朝向来决定镜像的方向。

（自 0.2.0）此工具具有耐久度。非创造模式下，每镜像一次方块，就会损耗一个耐久度。但是，如果镜像后的方块与之前的方块完全相同，则不会损耗耐久度。

（自 0.2.0）镜像工具可以使用青色染料、黄绿色染料、下界合金锭和木棍合成。

注意：同旋转工具一样，自 1.17 开始，镜像工具不能够镜像方块实体，因此对着悬挂的告示牌使用镜像工具时，其文字并不会有任何改变。

#### 台阶工具

可用来只破坏双台阶方块的一半。例如，持有此物品对着双白桦木台阶方块的上半部分破坏，则只会破坏其上半部分并掉落 1 个白桦木台阶，留下白桦木台阶方块的下半部分，而不是像原版那样破坏整个方块并掉落 2 个台阶方块。

从 Minecraft 1.17 开始，支持直接将具有台阶的完整方块（仅限原版方块以及本模组的方块，不含其他模组的方块）转化为台阶，例如对着橡木木板方块破坏即可将其转化为橡木台阶。该功能在 Minecraft 1.16.5 不受支持。

（自 0.2.0）此工具可以使用剪刀、石头（不是圆石）和木棍合成。注意此工具并不能像镐、斧等工具那样提高挖掘效率。

#### 强制放置工具

可用于强制放置或破坏方块而不造成方块更新。方块被放置时，并不会检查方块能否被放置，且如果被放置方块的地方已有方块，则会直接将其替换。可以用来形成本不可能做到的方块悬空效果。持有此工具时，会显示被破坏和将要放置的方块的轮廓。

放置方块时，会复制被点击到的方块，但如果副手拿着方块，则放置该方块。按住 Shift 时，可以放置和破坏流体（水和熔岩）。*破坏*流体方块时，旁边的流体方块（若有）不会流入，但如果使用此工具*放置*流体方块，则流体仍会正常流动。

使用此工具也可以直接清除实体，而不显示实体被伤害的动画，亦不产生副作用。例如，使用此工具清除村民不会使其加价，清除史莱姆不会使其分身。使用此工具可能无法彻底清除末影龙，但是可以清除正在钻出地面的监守者，甚至可以杀死创造模式玩家。

此工具仅限创造模式玩家使用。

#### 方块状态工具

点击方块即可获取方块状态属性（不含 NBT 数据）。按住 Shift 时，可以显示流体的状态属性，以及流体等级。注意：该过程是在客户端执行的。

此工具不可合成，但可以在生存模式下使用。

#### 数据标签工具

点击方块实体或者实体即可获取该方块或实体的所有 NBT 数据标签。

注意 NBT 数据在客户端与服务器（包括单人模式下的）之间可能存在差异。例如，箱子在客户端中始终是空的。本工具获取的是方块实体或实体在服务器中数据。

此工具不可合成，但是可以在生存模式下使用。

#### 文本复制工具

可以跨方块复制和粘贴文本。对方块按“攻击”键（默认为鼠标左键）可复制所有行的文本（对于悬挂告示牌，一次只复制一侧的所有文本）。对方块按“使用”键（默认为鼠标右键）则会将该物品已复制的所有文本粘贴上去，若已有文本，则已有的文本会被覆盖。如果复制的告示牌是空白的，则粘贴时也会清空告示牌内容。对原版告示牌和模组中的告示牌均有效，但有一些限制：

- 原版告示牌仅支持 4 行文本，因此如果粘贴的文本超过 4 行，则只粘贴前 4 行。
- 从原版告示牌复制到模组中的告示牌时，每一行的“颜色”属性对应原版告示牌的自身颜色。
- 由于原版告示牌仅支持一种颜色，且该颜色只能是游戏内置的 16 中颜色之一，因此将模组中的告示牌文本粘贴在原版告示牌时，可能会损失部分颜色。但是，JSON 文本中定义的颜色不会被忽略。
- 从原版告示牌复制文本到模组中的告示牌时，原版告示牌的自身颜色会应用至每一行，且原版告示牌的空行会被忽略。

此工具可以使用纸、粘液球和木棍合成。此工具具有耐久度。非创造模式下，每粘贴一次文本（即使粘贴的内容和被覆盖的内容相同）都会损耗一个耐久度。复制文本不会消耗耐久度。

#### 爆炸工具

爆炸工具是在 0.2.0 版本加入的。只能在创造模式获得，在创造模式物品栏中预定义了多个属性。

持有此物品时，对着 64 米内的任意方块按下“使用”键（默认为鼠标右键）即可产生爆炸。爆炸的强度、模式等属性取决于物品属性。爆炸会激怒附近的实体，会让村民加价，或者让狼与你敌对，但是如果潜行时进行爆炸，则不会激怒实体；此外，即使是在生存模式下，爆炸也不会伤害引发该爆炸的玩家，也就是说玩家对他自己使用爆炸工具引发的爆炸是免疫的。

此物品可以有以下属性：

- 强度，即爆炸的范围，默认为 4。按住 Shift 或 Alt 并滚动鼠标滚轮可调节爆炸强度，创造模式下调节范围为 -128 至 128，其他模式下调节范围为 0 至 64。强度为 0 的爆炸不会产生效果。强度为负的爆炸不会破坏方块，但仍会将实体弹开并可能会激怒实体，但不会给实体造成伤害，亦不会治愈实体。
- 是否产生火，默认为不产生火。若产生火，则比较类似于床和重生锚的爆炸。若爆炸设置为产生火，则即使爆炸类型为“无”，火仍可产生。
- 爆炸类型，可以是“破坏”“摧毁”或“无”，默认为“破坏”。“破坏”类似于 TNT 的爆炸，会 100% 掉落所有方块，并产生经验。“摧毁”类似于苦力怕的爆炸，方块只有一定的概率掉落，强度越大掉落概率越低。例如，如果引发强度为 32、“摧毁”类型的爆炸，则被摧毁的方块只有 1/32 的概率掉落。部分稀有方块会保证 100% 掉落，取决于方块的战利品表。类型为“无”的爆炸不会破坏方块，但仍可能伤害实体。

此工具可以在生存模式下使用，会消耗耐久度，每次爆炸消耗的耐久度等于其爆炸强度。尽管生存模式不能将强度调为负数，但是在生存模式下使用负强度的爆炸工具可以恢复耐久度。

若在创造模式下使用爆炸工具，则无论其爆炸类型和 `doTileDrops` 游戏规则，均不会掉落任何物品。

此工具可以用在发射器中。装有爆炸工具的发射器被触发时，如果前方 64 格的范围内被方块或实体（潜行的实体除外）阻挡，则会在被阻挡的地方发生爆炸。碰撞箱为空的方块和实体（如火把、标记为 Marker 的盔甲架、掉落的物品）以及旁观模式的玩家不会视为阻挡。通过发射器爆炸时，物品也会消耗耐久度，玩家不会对爆炸免疫，实体亦不会被激怒。

#### 万能工具

此工具具有无限的耐久度、挖掘速度、攻击力和攻击速度。

在生存模式下，可以使用此工具瞬间挖掘任意方块（当然，基岩还是不能破坏），且均会视为有效挖掘，掉落物与物品使用合适工具掉落的物品一致，且可以受到精准采集（丝绸之触）、时运等附魔影响。

攻击实体时，保证一击必杀。与强制放置工具不同，万能工具是*杀死*而非*清除*实体，因此会正常地激怒实体或者使史莱姆分身，也可以正常地杀死末影龙，不能杀死正在钻出地面的监守者。

对着生物点击“使用”键（默认为鼠标右键）会直接将其完全治愈。

与下界合金工具类似，此工具可以防火。